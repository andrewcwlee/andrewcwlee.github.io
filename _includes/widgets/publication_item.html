{% assign item = include.item %}
<div class="d-none d-md-block">
    <div class="row no-gutters {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray">
        <div class="col-md-4 col-xl-3 mb-md-0 p-md-3">
            {%- if item.cover -%}
            <div class="publication-cover-container">
                <img data-src="{{ item.cover | relative_url }}" alt="{{ item.title }}" class="lazy w-100 rounded-sm publication-cover-img" src="{{ '/assets/images/empty_300x200.png' | relative_url }}">
            </div>
            <!-- <div>
                {% if item.conference_logo %}
                {% if item.badge_url %}
                <a href="{{ item.badge_url }}" target="_blank"><img src="{{ item.conference_logo | relative_url }}" style="max-width: 50%; max-height: 80px; margin: 10px 0;"></a>
                {% else %}
                <img src="{{ item.conference_logo | relative_url }}" style="max-width: 50%; max-height: 80px; margin: 10px 0;">
                {% endif %}
                {% else %}
                {% if item.badge_url %}
                <a href="{{ item.badge_url }}" target="_blank">{% if item.badge %}<img src="https://img.shields.io/badge/{{ item.badge }}-f6f6f6?labelColor=1D4776" style="height: 16px;">{% endif %}</a>
                {% else %}
                {% if item.badge %}<img src="https://img.shields.io/badge/{{ item.badge }}-f6f6f6?labelColor=1D4776" style="height: 16px;">{% endif %}
                {% endif %}
                {% endif %}
                <a href="https://www.arxiv.org/abs/{{ item.arxiv }}" target="_blank"><img src="https://img.shields.io/badge/{{ item.arxiv }}-f6f6f6?labelColor=b31b1b&logo=arxiv" style="height: 16px;"></a>
                {% if item.cites %}
                    <a href="https://scholar.google.com/scholar?cites={{ item.cites }}" target="_blank">{% if item.pub_id %}<img src="https://img.shields.io/endpoint?url={{ site.google-scholar-crawler }}/{{ item.pub_id }}.json&logo=Google%20Scholar&labelColor=f6f6f6&color=9cf&style=flat" style="height: 16px;">{% endif %}</a>
                    {% endif %}
            </div> -->
            {%- else -%}
            <div class="publication-cover-container">
                <svg class="bubble-visual-hash lazy publication-cover-img" data-bubble-visual-hash="{{ item.id }}" viewBox="0 0 16 9"></svg>
            </div>
            {%- endif -%}
        </div>
        <div class="col-md-8 col-xl-9 p-3 pl-md-0">
            <h5 class="mt-0 mb-1 font-weight-bold">{{ item.title }}</h5>
            <p class="mt-0 mb-0">{% include widgets/author_list.html authors=item.authors %}</p>
            <p class="mt-0 mb-0">{{item.pub_pre}}<i>{{ item.pub }}</i>{{ item.pub_post }} {{ item.pub_date }} {{ item.pub_last }}</p>
            <!-- <p class="mt-0 mb-0 small text-muted">{{ item.abstract }}</p> -->
            
            <p class="pb-0 mb-0 lh-125 text-muted abstract-links">
                {% for link in item.links %}
                {% if link[1].url %}
                <a target="{{ link[1]['target'] }}" href="{{ link[1]['url'] }}">[{{ link[0] }}]</a>
                {% else %}
                <a target="_blank" href="{{ link[1] }}">[{{ link[0] }}]</a>
                {% endif %}
                {% endfor %}
                <a href="javascript:void(0)" onclick="toggleBib('{{ item.id }}')">[BibTeX]</a>
            </p>
            
        </p>

        <!-- Hidden BibTeX Block -->
        <pre><code id="bibtex-{{ item.id }}" style="display: none; background-color: #f8f9fa; padding: 10px; border-radius: 5px; font-size: 0.83em;">{{ item.bibtex }}</code></pre>
        </div>
    </div>
</div>

<div class="d-md-none {% unless include.hide_bottom_border %}border-bottom{% endunless %} border-gray {% if include.first %}rounded-top{% endif %} {% if include.last %}rounded-bottom{% endif %}">
    <div class="mobile-pub-container">
        {% if item.cover %}
        <div class="publication-cover-container-mobile">
            <img src="{{ item.cover | relative_url }}" alt="{{ item.title }}" class="publication-cover-img">
        </div>
        {% else %}
        <div class="publication-cover-container-mobile">
            <svg class="bubble-visual-hash publication-cover-img" data-bubble-visual-hash="{{ item.id }}" viewBox="0 0 16 9"></svg>
        </div>
        {% endif %}
        <div class="mobile-pub-content py-3 px-4">
            <!-- <p>
                {% if item.conference_logo %}
                {% if item.badge_url %}
                <a href="{{ item.badge_url }}" target="_blank"><img src="{{ item.conference_logo | relative_url }}" style="max-width: 50%; max-height: 60px; margin: 10px 0;"></a>
                {% else %}
                <img src="{{ item.conference_logo | relative_url }}" style="max-width: 50%; max-height: 60px; margin: 10px 0;">
                {% endif %}
                {% else %}
                {% if item.badge_url %}
                <a href="{{ item.badge_url }}" target="_blank">{% if item.badge %}<img src="https://img.shields.io/badge/{{ item.badge }}-f6f6f6?labelColor=1D4776" style="height: 16px;">{% endif %}</a>
                {% else %}
                {% if item.badge %}<img src="https://img.shields.io/badge/{{ item.badge }}-f6f6f6?labelColor=1D4776" style="height: 16px;">{% endif %}
                {% endif %}
                {% endif %}
                <a href="https://www.arxiv.org/abs/{{ item.arxiv }}" target="_blank"><img src="https://img.shields.io/badge/{{ item.arxiv }}-f6f6f6?labelColor=b31b1b&logo=arxiv" style="height: 16px;"></a>
                {% if item.cites %}
                <a href="https://scholar.google.com/scholar?cites={{ item.cites }}" target="_blank">{% if item.pub_id %}<img src="https://img.shields.io/endpoint?url={{ site.google-scholar-crawler }}/{{ item.pub_id }}.json&logo=Google%20Scholar&labelColor=f6f6f6&color=9cf&style=flat" style="height: 16px;">{% endif %}</a>
                {% endif %}
            </p> -->
            <h5 class="mt-0 mb-1 font-weight-bold">{{ item.title }}</h5>
            <p class="mt-0 mb-0">{% include widgets/author_list.html authors=item.authors %}</p>
            <p class="mt-0 mb-0">{{item.pub_pre}}<i>{{ item.pub }}</i>{{ item.pub_post }} {{ item.pub_date }} {{ item.pub_last }}</p>
            <!-- <p class="mt-0 mb-0 small text-muted">{{ item.abstract }}</p> -->
            <p class="pb-0 mb-0 lh-125 text-muted abstract-links">
                {% for link in item.links %}
                {% if link[1].url %}
                <a target="{{ link[1]['target'] }}" href="{{ link[1]['url'] }}">[{{ link[0] }}]</a>
                {% else %}
                <a target="_blank" href="{{ link[1] }}">[{{ link[0] }}]</a>
                {% endif %}
                {% endfor %}
                <a href="javascript:void(0)" onclick="toggleBib('mobile-{{ item.id }}')">[BibTeX]</a>
            </p>
            <pre><code id="bibtex-mobile-{{ item.id }}" style="display: none; background-color: #f8f9fa; padding: 10px; border-radius: 5px; font-size: 0.83em;">{{ item.bibtex }}</code></pre>
        </div>
    </div>
</div>

<script>
    function toggleBib(id) {
        var bibElement = document.getElementById('bibtex-' + id);
        if (bibElement.style.display === 'none') {
            bibElement.style.display = 'block';
        } else {
            bibElement.style.display = 'none';
        }
    }
    </script>